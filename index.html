<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Interface to typeform Results • rtypeform</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Interface to typeform Results">
<meta name="description" content="An R interface to the typeform &lt;https://www.typeform.com/&gt; application program interface. Also provides functions for downloading your results.">
<meta property="og:description" content="An R interface to the typeform &lt;https://www.typeform.com/&gt; application program interface. Also provides functions for downloading your results.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rtypeform</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/csgillespie/rtypeform/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="api-to-typeform-data-sets">API to typeform data sets<a class="anchor" aria-label="anchor" href="#api-to-typeform-data-sets"></a>
</h1></div>
<p><a href="https://app.travis-ci.com/csgillespie/rtypeform" class="external-link"><img src="https://app.travis-ci.com/csgillespie/rtypeform.svg?branch=master" alt="Build Status"></a> <a href="https://cran.r-project.org/package=rtypeform" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/rtypeform?color=brightgreen" alt="Downloads"></a> <a href="https://cran.r-project.org/package=rtypeform" class="external-link"><img src="https://www.r-pkg.org/badges/version/rtypeform" alt="CRAN_Status_Badge"></a> <a href="https://app.codecov.io/github/csgillespie/rtypeform?branch=master" class="external-link"><img src="https://codecov.io/github/csgillespie/rtypeform/coverage.svg?branch=master" alt="codecov.io"></a> <a href="https://github.com/csgillespie/rtypeform/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/csgillespie/rtypeform/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></p>
<p><a href="https://www.typeform.com" class="external-link">Typeform</a> is a company that specializes in online form building. This R package allows users to download their form results through the exposed API (V2).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package can be installed from CRAN</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rtypeform"</span><span class="op">)</span></span></code></pre></div>
<p>and loaded in the usual way.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/csgillespie/rtypeform" class="external-link">"rtypeform"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-this-package">Using this package<a class="anchor" aria-label="anchor" href="#using-this-package"></a>
</h2>
<p>This package can be used with either a typeform personal access token <strong>or</strong> by setting up an application and creating an OAuth access token.</p>
<p>A personal access token gives you full access to all of the typeform API for your typeforms and results. Note anyone with your personal access token can retrieve, update and delete your typeforms and data. To access your typeform data with a personal access token see the <a href="#pat">Personal Access Token</a> section below.</p>
<p>When creating an application with an OAuth access token, explicit permission for different functionality (scopes) must be granted. See the section below on <a href="#oauth">OAuth access</a>.</p>
<p>If you have previously used the version 1 API this is now entirely removed. You will need to generate new tokens.</p>
<div class="section level3">
<h3 id="personal-access-token">Personal Access Token<a class="anchor" aria-label="anchor" href="#personal-access-token"></a>
</h3>
<p>To use this package with a personal access token you need to first obtain one. It is fairly easy to obtain one. See typeform’s <a href="https://www.typeform.com/developers/get-started/personal-access-token/" class="external-link">help page</a>. The token will look something like</p>
<blockquote>
<p>943af478d3ff3d4d760020c11af102b79c440513</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="oauth-access">OAuth Access<a class="anchor" aria-label="anchor" href="#oauth-access"></a>
</h3>
<p>When you create an application that authenticates using OAuth you will use scopes to define the extent of access to a users data. This way your app can request a users permission to undertake actions on that users behalf.</p>
<p><a href="https://www.typeform.com/developers/get-started/applications/" class="external-link">This link</a> will get you started with registering a new application on your account.</p>
<p>Once you have your client id and client secret you can use the {rtypeform} package to set these as options.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rtypeform_set_scope.html">rtypeform_set_client_id</a></span><span class="op">(</span><span class="va">my_client_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/rtypeform_set_scope.html">rtypeform_set_client_secret</a></span><span class="op">(</span><span class="va">my_client_secret</span><span class="op">)</span></span></code></pre></div>
<p>As with the personal access token. Anyone with these details can impersonate you to obtain, update and remove data, they should always be kept safe.</p>
<p>Having set the client id and secret, before we can obtain an access token we also need to define the scope of our application. <code><a href="reference/rtypeform_set_scope.html">rtypeform_set_scope()</a></code> takes as argument a character vector of allowed access scopes. For more information see the scopes section below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rtypeform_set_scope.html">rtypeform_set_scope</a></span><span class="op">(</span><span class="st">"forms:read"</span><span class="op">)</span></span></code></pre></div>
<p>We can then generate a new token with</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api</span> <span class="op">=</span> <span class="fu"><a href="reference/make_new_token.html">make_new_token</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will open a web browser prompting the user to give permission. The token can be cached in a local .httr-oauth file between sessions.</p>
</div>
<div class="section level3">
<h3 id="scopes">Scopes<a class="anchor" aria-label="anchor" href="#scopes"></a>
</h3>
<p>You define the scope at the time that the access token is generated. To discover what each scope allows access to, see <a href="https://www.typeform.com/developers/get-started/scopes/" class="external-link">here</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="using-the-package">Using the package<a class="anchor" aria-label="anchor" href="#using-the-package"></a>
</h2>
<p>Once you have this key, (either personal access token, or an oauth token created by <code><a href="reference/make_new_token.html">make_new_token()</a></code>) we can extract data from typeform</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api</span> <span class="op">=</span> <span class="st">"XXXXX"</span></span>
<span><span class="co"># Was get_typeforms() in V1 of the package</span></span>
<span><span class="va">forms</span> <span class="op">=</span> <span class="fu"><a href="reference/get_forms.html">get_forms</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span></span></code></pre></div>
<p>The forms object is also contains attributes containing the total number of forms.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">forms</span>, <span class="st">"total_items"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 476</span></span></code></pre></div>
<p>If you don’t pass your <code>api</code> token as an argument, it will attempt to read the variable <code>typeform_api2</code> from your <code>.Renviron</code> file, via <code>Sys.getenv("typeform_api2")</code>. If this variable is set correctly, then you can <strong>omit</strong> the <code>api</code> argument</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># See ?get_forms for further details</span></span>
<span><span class="va">forms</span> <span class="op">=</span> <span class="fu"><a href="reference/get_forms.html">get_forms</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To set the access token for the current session you can use</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rtypeform_set_scope.html">rtypeform_set_token</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span></span></code></pre></div>
<p>set (see Efficient R programming <a href="https://csgillespie.github.io/efficientR/set-up.html#renviron" class="external-link">Chapter 2</a> for more details).</p>
<p>You can download data from a particular typeform via</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Most recent typeform</span></span>
<span><span class="va">form_id</span> <span class="op">=</span> <span class="va">forms</span><span class="op">$</span><span class="va">form_id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">q</span> <span class="op">=</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span><span class="va">form_id</span>, completed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The object <code>q</code> is a list. The first element is <code>meta</code> that contain details on the user, such as, their <code>platform</code> and <code>user_agent</code>. The other list elements are responses to each question.</p>
<p>There are a number of options for downloading the data. For example</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">q</span> <span class="op">=</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span><span class="va">form_id</span>, completed <span class="op">=</span> <span class="cn">TRUE</span>, page_size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>See the <code><a href="reference/get_responses.html">?get_responses</a></code> help page for other options.</p>
<div class="section level3">
<h3 id="looking-at-the-responses">Looking at the responses<a class="anchor" aria-label="anchor" href="#looking-at-the-responses"></a>
</h3>
<p>Since the responses is list, we get to perform lots of map operations. I find using {purrr} and the {tidyverse} make this a bit easier. To see the question types we can use string a few <code>map()</code> commands together</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org" class="external-link">"tidyverse"</a></span><span class="op">)</span></span>
<span><span class="va">question_types</span> <span class="op">=</span> <span class="va">q</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span> <span class="op">%&gt;%</span> <span class="co"># Remove the meta</span></span>
<span>   <span class="fu">map</span><span class="op">(</span><span class="op">~</span><span class="fu">select</span><span class="op">(</span><span class="va">.x</span>, <span class="va">type</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">map_df</span><span class="op">(</span><span class="op">~</span><span class="fu">slice</span><span class="op">(</span><span class="va">.x</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>   <span class="fu">pull</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-multiple-filters--order">Example: Multiple Filters / Order<a class="anchor" aria-label="anchor" href="#example-multiple-filters--order"></a>
</h3>
<p>Imagine we only want:</p>
<ul>
<li>completed results, so we add the parameter <code>completed = TRUE</code>.</li>
<li>a maximum of 5 results, so we add the parameter <code>page_size = 5</code>.</li>
<li>results since <code>2018-01-01 11:00:00</code>.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">since</span> <span class="op">=</span> <span class="st">"2018-01-01 11:00:00"</span></span>
<span><span class="co"># convert to date-time</span></span>
<span><span class="va">since</span> <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="va">since</span><span class="op">)</span></span>
<span><span class="va">q</span> <span class="op">=</span> <span class="fu"><a href="reference/get_responses.html">get_responses</a></span><span class="op">(</span><span class="va">form_id</span>, completed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                  page_size <span class="op">=</span> <span class="fl">5</span>, since <span class="op">=</span> <span class="va">since</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="other-information">Other information<a class="anchor" aria-label="anchor" href="#other-information"></a>
</h2>
<ul>
<li>If you have any suggestions or find bugs, please use the github <a href="https://github.com/csgillespie/rtypeform/issues" class="external-link">issue tracker</a>.</li>
<li>Feel free to submit pull requests.</li>
</ul>
<hr>
<p>Development of this package was supported by <a href="https://www.jumpingrivers.com" class="external-link">Jumping Rivers</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rtypeform" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/csgillespie/rtypeform/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/csgillespie/rtypeform/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rtypeform</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Colin Gillespie <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jamie Owen <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Colin Gillespie, Jamie Owen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
